<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Coach MARK - Elite Training</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;700&family=Inter:wght@400;600;800&display=swap"
    rel="stylesheet">

  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'sans-serif'],
            header: ['Oswald', 'sans-serif'],
          },
          colors: {
            'electric-red': { 400: '#FF0033', 500: '#E6002E', 600: '#CC0029' },
            'off-white': '#F5F5F5'
          }
        }
      }
    }
  </script>
</head>

<body class="bg-neutral-950 text-white antialiased font-sans overflow-x-hidden">

  <div
    class="min-h-screen w-full flex flex-col bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-neutral-900 via-neutral-950 to-black">

    <nav id="navbar"
      class="sticky top-0 z-50 w-full px-6 py-4 backdrop-blur-xl bg-neutral-950/80 border-b border-white/10 flex justify-between items-center h-[80px]">
      <div class="flex items-center space-x-2 cursor-pointer">
        <svg class="w-8 h-8 text-electric-red-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
        </svg>
        <span class="font-header text-2xl font-bold uppercase tracking-wider italic">
          Coach<span class="text-electric-red-400">MARK</span>
        </span>
      </div>
      <div class="hidden md:flex items-center space-x-8 font-header text-sm uppercase tracking-widest font-medium">
        <a href="#" class="hover:text-electric-red-400 transition-colors">Philosophy</a>
        <a href="#" class="hover:text-electric-red-400 transition-colors">Training</a>
        <a href="#" onclick="expandCard('card-4', 'ghost-4')"
          class="px-6 py-2 bg-electric-red-400 text-white font-bold skew-x-[-10deg] hover:bg-electric-red-500 transition-transform hover:scale-105">
          <span class="block skew-x-[10deg]">JOIN SQUAD</span>
        </a>
      </div>
      <button class="md:hidden text-white hover:text-electric-red-400 transition-colors">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path>
        </svg>
      </button>
    </nav>

    <main class="flex-grow flex items-center justify-center p-4 py-10 relative">

      <div id="main-grid"
        class="relative max-w-6xl w-full grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-5 auto-rows-[160px] md:auto-rows-[200px]">
        <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
        <div id="ghost-1" class="hidden col-span-2 row-span-2 rounded-3xl bg-transparent pointer-events-none"></div>

        <div id="card-1" onclick="expandCard('card-1', 'ghost-1')"
          class="expandable-card relative col-span-2 row-span-2 bg-neutral-900 rounded-3xl overflow-hidden border border-white/10 cursor-pointer shadow-2xl group transition-all duration-300 hover:scale-[1.01]">
          <div class="absolute inset-0 bg-neutral-800 flex items-center justify-center">
            <span class="text-neutral-500 font-header tracking-widest text-sm opacity-50">[VIDEO LOOP]</span>
          </div>
          <div class="absolute bottom-0 left-0 p-6 md:p-8 z-10 w-full">
            <h2
              class="font-header text-4xl md:text-6xl uppercase italic font-bold tracking-tighter text-white drop-shadow-lg leading-[0.9]">
              Unleash<br>Speed
            </h2>
          </div>
          <div class="details-content hidden opacity-0 absolute inset-0 z-20 p-8 pt-32 bg-neutral-900 overflow-y-auto">
            <button
              class="close-btn absolute top-6 right-6 p-2 bg-white/10 rounded-full hover:bg-electric-red-400 transition-colors"><svg
                class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg></button>
            <h2 class="text-3xl text-electric-red-400 font-header mb-4">Speed Training Protocol</h2>
            <p class="text-white text-lg max-w-2xl">We focus on explosive starts and deceleration mechanics.</p>
          </div>
        </div>
        <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
        <div id="ghost-2" class="hidden col-span-2 md:row-span-1 rounded-3xl bg-transparent pointer-events-none"></div>

        <div id="card-2" onclick="expandCard('card-2', 'ghost-2')"
          class="expandable-card relative group col-span-2 md:row-span-1 rounded-3xl overflow-hidden border border-white/10 cursor-pointer hover:border-electric-red-400/50 transition-all duration-300 shadow-lg">
          <div
            class="absolute inset-0 bg-[url('./animeBG.png')] bg-cover bg-[center_top] transition-transform duration-700 ease-out group-hover:scale-105">
          </div>

          <div id="card-2-preview"
            class="relative z-10 h-full p-6 md:p-8 flex flex-col justify-center items-start pointer-events-none transition-opacity duration-300">
            <p
              class="text-white text-xs font-bold tracking-widest uppercase mb-1 drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)]">
              Philosophy</p>
            <h1
              class="font-header text-4xl md:text-5xl text-white uppercase leading-none drop-shadow-[0_4px_4px_rgba(0,0,0,0.8)]">
              Zero Cost.<br>
              <span class="text-electric-red-400 drop-shadow-[0_2px_2px_rgba(0,0,0,0.8)]">100% Grind.</span>
            </h1>
          </div>

          <div
            class="details-content hidden opacity-0 absolute inset-0 z-20 p-8 overflow-y-auto flex flex-col items-start justify-center">
            <button onclick="event.stopPropagation(); closeCard('card-2', 'ghost-2')"
              class="absolute top-6 right-6 p-2 bg-white/10 rounded-full hover:bg-red-500 transition-colors pointer-events-auto">
              <svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
            <div class="max-w-3xl mt-12 pointer-events-auto">
              <p class="text-2xl text-white font-sans leading-relaxed drop-shadow-md mb-6 font-medium bg-neutral-900/70 p-6 rounded-xl shadow-lg"
                style="-webkit-text-stroke: .4px #FF0033; text-stroke: 1px #FF0033;">
                We believe that talent should never be restricted by a price tag. In a world where elite training costs
                thousands, we are breaking the mold.
              </p>
              <p class="text-2xl text-white font-sans leading-relaxed drop-shadow-md mb-6 font-medium bg-neutral-900/70 p-6 rounded-xl shadow-lg"
                style="-webkit-text-stroke: .4px #FF0033; text-stroke: 1px #FF0033;">
                Our program isn't about fancy equipment or expensive gear. It's about <span
                  class="text-electric-red-400 font-bold"
                  style="-webkit-text-stroke: .4px white; text-stroke: 1px white;">Mental Toughness</span>, <span
                  class="text-electric-red-400 font-bold"
                  style="-webkit-text-stroke: .4px white; text-stroke: 1px white;">Tactical IQ</span>, and the
                willingness to outwork everyone else on the field.
              </p>
              <button
                class="mt-4 px-8 py-3 bg-electric-red-400 text-white font-bold uppercase skew-x-[-10deg] hover:bg-off-white hover:text-black transition-colors">
                <span class="block skew-x-[10deg]">Apply Now</span>
              </button>
            </div>
          </div>
        </div>
        <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
        <div id="ghost-3" class="hidden col-span-1 md:row-span-1 rounded-3xl bg-transparent pointer-events-none"></div>

        <div id="card-3" onclick="expandCard('card-3', 'ghost-3')"
          class="expandable-card col-span-1 md:row-span-1 bg-neutral-800/80 backdrop-blur-md rounded-3xl p-5 flex flex-col justify-between border border-white/10 cursor-pointer hover:bg-neutral-800 transition-all shadow-lg group">
          <div class="flex justify-between items-start pointer-events-none">
            <span class="relative flex h-3 w-3"><span
                class="animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"></span><span
                class="relative inline-flex rounded-full h-3 w-3 bg-red-500"></span></span>
            <span class="text-neutral-400 text-[10px] font-bold uppercase">Next Camp</span>
          </div>
          <div class="pointer-events-none">
            <p class="font-header text-2xl md:text-3xl font-bold text-white leading-none mb-1">SAT 9AM</p>
            <p class="text-neutral-400 text-xs truncate">High School Stadium</p>
          </div>
          <div class="details-content hidden opacity-0 absolute inset-0 z-20 p-6 bg-neutral-900 overflow-y-auto">
            <button class="close-btn absolute top-4 right-4 p-1 bg-white/10 rounded-full hover:bg-red-500"><svg
                class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg></button>
            <h3 class="text-xl text-white font-header mb-4 mt-8">Schedule</h3>
            <p>Detailed calendar here...</p>
          </div>
        </div>
        <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
        <div id="ghost-4" class="hidden col-span-1 md:row-span-1 rounded-3xl bg-transparent pointer-events-none"></div>

        <div id="card-4" onclick="expandCard('card-4', 'ghost-4')"
          class="expandable-card group col-span-1 md:row-span-1 bg-electric-red-400 rounded-3xl p-5 flex flex-col justify-between cursor-pointer relative overflow-hidden border border-white/10 shadow-lg">
          <div
            class="absolute -right-6 -top-6 w-24 h-24 bg-white/20 rounded-full blur-2xl group-hover:scale-150 transition-transform">
          </div>
          <span class="text-white text-[10px] font-bold uppercase z-10 pointer-events-none">Sign Up</span>
          <div class="z-10 pointer-events-none">
            <p class="font-header text-xl md:text-2xl font-bold text-white leading-none">JOIN THE<br>TEAM</p>
          </div>
          <div
            class="details-content hidden opacity-0 absolute inset-0 z-20 p-8 bg-neutral-900 overflow-y-auto">
            <button
              class="close-btn absolute top-6 right-6 p-2 bg-white/10 rounded-full hover:bg-electric-red-400 transition-colors"><svg
                class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg></button>
            
            <div class="max-w-2xl mx-auto mt-16">
              <h2 class="text-3xl text-electric-red-400 font-header mb-2">JOIN THE SQUAD</h2>
              <p class="text-neutral-400 text-sm mb-8">Fill out the form below to start your journey</p>
              
              <form id="signup-form" class="space-y-6">
                <!-- Full Name -->
                <div>
                  <label class="block text-white text-sm font-bold mb-2">Full Name*</label>
                  <input 
                    type="text" 
                    name="fullName" 
                    required
                    class="w-full bg-neutral-800 border border-white/10 rounded-xl p-3 text-white focus:border-electric-red-400 outline-none transition-colors"
                    placeholder="Enter athlete's full name"
                  />
                </div>

                <!-- Age -->
                <div>
                  <label class="block text-white text-sm font-bold mb-2">Age*</label>
                  <input 
                    type="number" 
                    name="age" 
                    required
                    min="5"
                    max="18"
                    class="w-full bg-neutral-800 border border-white/10 rounded-xl p-3 text-white focus:border-electric-red-400 outline-none transition-colors"
                    placeholder="Enter age"
                  />
                </div>

                <!-- School -->
                <div>
                  <label class="block text-white text-sm font-bold mb-2">School*</label>
                  <input 
                    type="text" 
                    name="school" 
                    required
                    class="w-full bg-neutral-800 border border-white/10 rounded-xl p-3 text-white focus:border-electric-red-400 outline-none transition-colors"
                    placeholder="Enter school name"
                  />
                </div>

                <!-- Guardian Full Name -->
                <div>
                  <label class="block text-white text-sm font-bold mb-2">Guardian Full Name*</label>
                  <input 
                    type="text" 
                    name="guardianName" 
                    required
                    class="w-full bg-neutral-800 border border-white/10 rounded-xl p-3 text-white focus:border-electric-red-400 outline-none transition-colors"
                    placeholder="Enter parent/guardian name"
                  />
                </div>

                <!-- Guardian Contact Number -->
                <div>
                  <label class="block text-white text-sm font-bold mb-2">Guardian Contact Number*</label>
                  <input 
                    type="tel" 
                    name="guardianPhone" 
                    required
                    pattern="[0-9]{10}"
                    class="w-full bg-neutral-800 border border-white/10 rounded-xl p-3 text-white focus:border-electric-red-400 outline-none transition-colors"
                    placeholder="(555) 123-4567"
                  />
                </div>

                <!-- Submit Button -->
                <button 
                  type="submit"
                  class="w-full mt-6 px-8 py-4 bg-electric-red-400 text-white font-bold uppercase skew-x-[-10deg] hover:bg-white hover:text-black transition-colors">
                  <span class="block skew-x-[10deg]">Submit Application</span>
                </button>
              </form>

              <!-- Success Message -->
              <div id="signup-success" class="hidden mt-6 p-4 bg-green-500/20 border border-green-500/50 rounded-xl">
                <p class="text-green-400 text-center font-bold">âœ“ Application Submitted Successfully!</p>
                <p class="text-neutral-400 text-sm text-center mt-2">We'll contact you soon.</p>
              </div>
            </div>
          </div>
        </div>
        <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
        <div id="ghost-5" class="hidden col-span-1 md:row-span-1 rounded-3xl bg-transparent pointer-events-none"></div>

        <div id="card-5" onclick="expandCard('card-5', 'ghost-5')"
          class="expandable-card col-span-1 md:row-span-1 bg-neutral-900/80 backdrop-blur-md rounded-3xl overflow-hidden relative border border-white/10 cursor-pointer shadow-lg group">
          <div class="absolute inset-0 bg-neutral-800 flex items-center justify-center pointer-events-none"><span
              class="text-neutral-600 text-xs">[IMG]</span></div>
          <div
            class="absolute bottom-0 left-0 w-full p-4 bg-gradient-to-t from-black to-transparent pointer-events-none">
            <p class="font-header text-white text-lg font-bold uppercase leading-none">Coach MARK</p>
          </div>
          <div class="details-content hidden opacity-0 absolute inset-0 z-20 p-6 bg-neutral-900 overflow-y-auto">
            <button class="close-btn absolute top-4 right-4 p-1 bg-white/10 rounded-full hover:bg-electric-red-400"><svg
                class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg></button>
            <h2 class="text-2xl text-electric-red-400 font-header mb-2 mt-8">Coach MARK</h2>
            <p class="text-sm text-neutral-300">Former D1 Athlete...</p>
          </div>
        </div>
        <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
        <div id="ghost-6" class="hidden col-span-1 md:row-span-1 rounded-3xl bg-transparent pointer-events-none"></div>

        <div id="card-6" onclick="expandCard('card-6', 'ghost-6')"
          class="expandable-card col-span-1 md:row-span-1 bg-neutral-950 rounded-3xl p-4 border border-white/10 flex items-center justify-center relative overflow-hidden shadow-lg cursor-pointer group">
          <div
            class="absolute inset-0 bg-[linear-gradient(to_right,#ffffff0d_1px,transparent_1px),linear-gradient(to_bottom,#ffffff0d_1px,transparent_1px)] bg-[size:16px_16px] opacity-70">
          </div>
          <div class="text-center z-10 pointer-events-none">
            <p
              class="font-header text-2xl md:text-3xl text-white font-bold group-hover:text-electric-red-400 transition-colors">
              IQ + GRIT</p>
          </div>
          <div class="details-content hidden opacity-0 absolute inset-0 z-20 p-6 bg-neutral-950 overflow-y-auto">
            <button class="close-btn absolute top-4 right-4 p-1 bg-white/10 rounded-full hover:bg-red-500"><svg
                class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg></button>
            <p class="mt-8">Playbook details...</p>
          </div>
        </div>
        <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
        <div id="ghost-7" class="hidden col-span-1 md:row-span-1 rounded-3xl bg-transparent pointer-events-none"></div>

        <div id="card-7" onclick="expandCard('card-7', 'ghost-7')"
          class="expandable-card col-span-1 md:row-span-1 bg-neutral-800/80 rounded-3xl p-4 flex flex-col justify-center items-center border border-white/10 cursor-pointer hover:bg-neutral-700 transition-colors shadow-lg relative overflow-hidden group">

          <!-- Background Image Layer -->
          <div class="absolute inset-0 bg-[url('./mapbg.png')] bg-cover bg-center pointer-events-none"></div>

          <!-- Content Layer -->
          <div
            class="z-10 flex flex-col items-center pointer-events-none">
            <svg class="w-8 h-8 text-electric-red-400 mb-2 drop-shadow-lg" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
            </svg>
            <p class="font-bold text-xs text-white tracking-wider drop-shadow-lg">VIEW MAP</p>
          </div>

          <div class="details-content hidden opacity-0 absolute inset-0 z-20 bg-neutral-900 flex flex-col">

            <div
              class="absolute top-0 left-0 w-full p-6 z-30 flex justify-between items-start bg-gradient-to-b from-black/90 to-transparent pointer-events-none">
              <div>
                <h2 id="map-location-name" class="text-2xl text-electric-red-400 font-header uppercase">LOADING
                  LOCATION...</h2>
                <p id="map-location-address" class="text-white text-sm font-sans drop-shadow-md opacity-80">Please
                  wait...</p>
              </div>

              <button
                class="p-2 bg-black/50 backdrop-blur-md rounded-full hover:bg-electric-red-400 transition-colors pointer-events-auto close-btn">
                <svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>

            <div id="google-map" class="w-full h-full bg-neutral-800"></div>

            <a id="map-directions-btn" href="#" target="_blank"
              class="absolute bottom-8 right-8 z-30 px-6 py-3 bg-electric-red-400 text-white font-bold uppercase skew-x-[-10deg] hover:bg-white hover:text-black transition-colors shadow-xl pointer-events-auto">
              <span class="block skew-x-[10deg]">Get Directions</span>
            </a>
          </div>
        </div>
        <!-- ///////////////////////////////////////////////////////////////////////////////////// -->
        <div id="ghost-8" class="hidden col-span-1 md:row-span-1 rounded-3xl bg-transparent pointer-events-none"></div>

        <div id="card-8" onclick="expandCard('card-8', 'ghost-8')"
          class="expandable-card col-span-1 md:row-span-1 bg-neutral-900/80 rounded-3xl p-4 flex flex-col justify-center items-center border border-white/10 shadow-lg cursor-pointer">
          <p class="font-header text-5xl font-black text-white pointer-events-none">50+</p>
          <p class="text-neutral-400 text-[10px] uppercase pointer-events-none">Recruits</p>
          <div class="details-content hidden opacity-0 absolute inset-0 z-20 p-6 bg-neutral-900 overflow-y-auto">
            <button class="close-btn absolute top-4 right-4 p-1 bg-white/10 rounded-full hover:bg-red-500"><svg
                class="w-4 h-4 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg></button>
            <h3 class="text-white font-header mt-8 mb-4">Success Stories</h3>
            <p class="text-sm text-neutral-400">Over 50 athletes...</p>
          </div>
        </div>
        <!-- ///////////////////////////////////////////////////////////////////////////////////// -->

      </div>
    </main>
  </div>
  <script src="script.js"></script>

  <!-- GOOGLE MAPS API -->

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDl7Bko2niUvNAcwaUe-zPXg7_TGMtlD5Y"></script>

<script type="module">
    import { db } from './firebase-config.js';
    import { doc, onSnapshot, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // Handle form submissions to Firestore
    const signupForm = document.getElementById('signup-form');
    
    if (signupForm) {
      // Remove the old event listener from script.js by cloning the form
      const newSignupForm = signupForm.cloneNode(true);
      signupForm.parentNode.replaceChild(newSignupForm, signupForm);
      
      newSignupForm.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        // Get form data
        const formData = {
          fullName: newSignupForm.fullName.value,
          age: parseInt(newSignupForm.age.value),
          school: newSignupForm.school.value,
          guardianName: newSignupForm.guardianName.value,
          guardianPhone: newSignupForm.guardianPhone.value,
          timestamp: new Date().toISOString()
        };
        
        try {
          // Save to Firestore
          await addDoc(collection(db, "signups"), formData);
          console.log('Signup saved successfully');
          
          // Show success message
          const successMsg = document.getElementById('signup-success');
          newSignupForm.classList.add('hidden');
          successMsg.classList.remove('hidden');
          
          // Reset form and hide success message after 3 seconds
          setTimeout(() => {
            newSignupForm.reset();
            newSignupForm.classList.remove('hidden');
            successMsg.classList.add('hidden');
          }, 3000);
          
        } catch (error) {
          console.error('Error saving signup:', error);
          alert('There was an error submitting your application. Please try again.');
        }
      });
    }


    let map;
    let marker;

    // Dark Mode Style for Map
    const darkStyle = [
        { elementType: "geometry", stylers: [{ color: "#171717" }] },
        { elementType: "labels.text.stroke", stylers: [{ color: "#171717" }] },
        { elementType: "labels.text.fill", stylers: [{ color: "#746855" }] },
        { featureType: "road", elementType: "geometry", stylers: [{ color: "#38414e" }] },
        { featureType: "road", elementType: "geometry.stroke", stylers: [{ color: "#212a37" }] },
        { featureType: "water", elementType: "geometry", stylers: [{ color: "#000000" }] },
    ];

    // Initialize Map
    function initClientMap() {
        const mapDiv = document.getElementById("google-map");
        // Default to a placeholder location (San Diego) until Firebase loads
        const defaultLoc = { lat: 32.7157, lng: -117.1611 };

        map = new google.maps.Map(mapDiv, {
            center: defaultLoc,
            zoom: 15,
            styles: darkStyle,
            disableDefaultUI: true,
            zoomControl: true,
        });

        marker = new google.maps.Marker({
            position: defaultLoc,
            map: map,
        });

        // --- CONNECT TO FIREBASE ---
        // 'onSnapshot' triggers every time the Admin updates the 'map_config' document
        onSnapshot(doc(db, "settings", "map_config"), (doc) => {
            if (doc.exists()) {
                const data = doc.data();
                const newPos = { lat: data.lat, lng: data.lng };

                // 1. Update Map View
                map.setCenter(newPos);
                marker.setPosition(newPos);

                // 2. Update Text Labels
                document.getElementById('map-location-name').innerText = data.name;
                document.getElementById('map-location-address').innerText = data.address;

                // 3. Update Directions Link
                // Uses Google Maps URL schema to open navigation
                const dirLink = `https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(data.address)}&destination_place_id=${data.placeId}`;
                document.getElementById('map-directions-btn').href = dirLink;
            }
        });
    }

    // Run initialization if Google Maps is loaded
    if (typeof google !== 'undefined') {
        initClientMap();
    } else {
        window.addEventListener('load', initClientMap);
    }
    
    // Export map to window so script.js can access it for resizing
    window.trainMap = map;
</script>
</body>



</html>